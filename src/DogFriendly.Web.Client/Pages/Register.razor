@page "/register"

<SearchPlace />

<!-- Main Content -->
<main class="container py-3">
    <div class="row">
        <section class="col-sm-12 col-md-6 col-lg-6 mx-auto">
            <EditForm Model="ViewModel" OnValidSubmit="RegisterUser">
                <div class="card user-details">
                    <div class="card-body">
                        <img src="img/logo.png" alt="Logo" class="img-fluid mb-3">
                        <DataAnnotationsValidator />
                        <div class="d-flex align-items-center mb-3">
                            <label class="form-label me-2" for="userName">
                                Pseudo
                            </label>
                            <InputText id="userName" class="form-control" @bind-Value="ViewModel.UserName" />
                        </div>
                        <div>
                            <div class="d-flex justify-content-center mb-1">
                                <div class="btn btn-primary btn-rounded">
                                    <label class="form-label text-white" style="margin:0" for="userPicture">
                                        Choisir une autre photo
                                    </label>
                                    <InputFile id="userPicture" class="form-control d-none" accept="image/*"
                                               OnChange="HandleFileSelected" />
                                </div>
                            </div>
                            <div class="mb-4 d-flex justify-content-center">
                                <div style="width: 150px;">
                                    @if (ViewModel.PictureContent != null)
                                    {
                                        <button type="button" class="btn-close user-reset-picture" aria-label="Close" @onclick="ResetPicture" />
                                    }
                                    @if (!string.IsNullOrEmpty(ViewModel.UserPicture))
                                    {
                                        <img id="selectedImage" src="@ViewModel.UserPicture" style="width: 150px;" />
                                    }
                                </div>
                            </div>
                            @if (!string.IsNullOrEmpty(ErrorMessage))
                            {
                                <div class="d-flex justify-content-center alert alert-danger">
                                    @ErrorMessage
                                </div>
                            }
                            <ValidationSummary class="d-flex justify-content-center alert alert-danger" />
                            <div class="d-flex justify-content-center mt-1">
                                <button class="btn btn-primary" type="submit">
                                    Créer mon compte
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </EditForm>
        </section>
    </div>
</main>