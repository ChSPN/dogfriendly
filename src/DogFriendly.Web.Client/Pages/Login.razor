@page "/login"
@using Blazorise
@using Blazorise.Bootstrap5
@using Blazorise.Icons.FontAwesome

<PageTitle>Connexion</PageTitle>

<!-- Main Content -->
<main class="container py-3">
    <div class="row">
        <section class="col-sm-12 col-md-6 col-lg-4 mx-auto">
            <div class="card user-login">
                <div class="card-body">
                    <img src="img/logo.png" alt="Logo" class="img-fluid mb-3">
                    @if (!string.IsNullOrEmpty(UserProfil?.UserName))
                    {
                        <p>Bonjour, <strong>@UserProfil?.UserName</strong>.</p>
                        @if (!string.IsNullOrEmpty(UserProfil?.UserPicture))
                        {
                            <p>
                                <img src="@UserProfil.UserPicture" alt="Profile" style="width: 150px;" />
                            </p>
                        }
                        <button class="btn btn-outline-dark" @onclick="Logout">
                            Déconnexion
                        </button>
                    }
                    else
                    {
                        <div id="firebaseui-auth-container"></div>
                    }
                </div>
            </div>
        </section>
    </div>
</main>

<Modal @ref="_modal">
    <ModalContent Centered>
        <ModalHeader>
            Confirmation de déconnexion
            <Button CloseButton @onclick="Cancel">
                <i class="fa fa-times"></i>
            </Button>
        </ModalHeader>
        <Blazorise.ModalBody>
            Êtes-vous sûr de vouloir vous déconnecter ?
        </Blazorise.ModalBody>
        <Blazorise.ModalFooter class="custom-modal-footer">
            <Button Color="Color.Primary" @onclick="Confirm">Oui</Button>
            <Button Color="Color.Secondary" @onclick="Cancel">Non</Button>
        </Blazorise.ModalFooter>
    </ModalContent>
</Modal>